*taal.txt* LLM assistance for improving grammar and spelling

------------------------------------------------------------------------------
                                                                          *Taal*

FEATURES

- Suggests grammar and spelling improvements. This feature is language 
  agnostic, as long as the chosen LLM is capable of that.

- Offers a word-by-word diff of the original text and the suggested
  improvements.

- Applies improvements all at once, or on a one-to-one basis.

- Recognizes the language the text is written in and sets the correct
  |spelllang| option.
  
- Interacts with the LLM using a user command and the selected text.

- Supports three LLMs: Claude, Gemini, OpenAI-responses.

DEPENDENCIES

- nvim-lua/plenary.nvim
  Pleanary's curl is used to contact LLM's

INSTALLATION

This module needs to be set up with `require('taal').setup({})`. The setup arg
`{}` is optional and can be a custom config table, to overwrite the defaults.
Calling the setup function, with or without a table, is mandatory.

API keys ~

Three LLM's are supported. Two of them (Claude and OpenAI-responses) need an
API key. These keys should be made available via an environment variable:

- Claude: `{{CLAUDE_API_KEY}}`
- OpenAI_responses: `{{OPENAI_API_KEY}}`

Config options ~

The config supports these fields:
- log_level: string - ["trace", "info", "debug", "error"] - default: "error"
- timeout: number - timeout for LLM requests in ms - default: 6000
  (six-thousand, i.e., six seconds)
- adapters: table:
  {
    {[LLM] = {url = url to be used by this LLM},
    {[LLM] = {url = ...}},
  }
- adapter: string - default adapter for every LLM call - default: Gemini
- model: string - default model for every LLM call - default: gemini-2.5-flash
- commands: table:
  {
    [command_name]: string - ["grammar", "set_spelllang", "interact"] = 
    { adapter = ["claude", "gemini", "openai_responses"], 
    model = "[chosen model]"}
  }

Default config ~

The default config is:
>lua
  {
    log_level = "error",
    timeout = 6000,

    adapters = {
      claude = {
	url = "https://api.anthropic.com",
      },
      gemini = {
	url = "https://generativelanguage.googleapis.com",
      },
      openai_responses = {
	url = "https://api.openai.com",
      },
    },

    adapter = "gemini",
    model = "gemini-2.5-flash",

    commands = {
      improve_grammar = {
	adapter = nil,
	model = nil,
      },
      suggest_grammar = {
	adapter = nil,
	model = nil,
      },
      set_spelllang = {
	adapter = nil,
	model = nil,
      },
      interact = {
	adapter = nil,
	model = nil,
      },
    },
  }
<

Example config ~

This example uses Gemini and the model gemini-2.5-flash as the default LLM (because it
is not changed), except for the interact command. For that command it will use
Claude with the model claude-sonnet-4-5-20250929.
>lua
  { 
    commands = {
      interact = { 
	adapter="claude", model="claude-sonnet-4-5-20250929", 
      }
    }
  }

COMMANDS

TaalApplySuggestion                                       *taal-apply-suggestion*
    Applies the suggested improvement of the text with an error currently
    under cursor. 

TaalGrammar                                                        *taal-grammar*
    Checks grammar and spelling of the line of text currently under cursor. 
    Grammar and spelling errors are highlighted with the 'TaalIssue' highlight group.
    This command takes two optional arguments:
    - <inlay> Shows grammar and spelling improvements as inlay hints using the 
      'TaalInlay' highlight group.
    - <scratch> Writes the complete improved line in a scratch buffer in a vertical
      split.

TaalHover                                                            *taal-hover*
    Shows the grammar improvement of the text with an error currently under
    cursor in a popup.

TaalInteract                                                       *taal-interact*
    Asks the user for a prompt and sends this, together with the selected text
    to the LLM. Use in Visual Mode. Note that this ex command cannot be used
    by using `:TaalInteract` as using the colon will switch Neovim back to
    normal mode. Map this command to a key using `<Cmd>TaalInteract<Cr>`
    instead.

TaalSetSpelllang                                             *taal-set-spelllang*
    Recognizes the language of the text under cursor and sets the spelling
    language accordingly using the 'spelllang' option.

HIGHLIGHT GROUPS

- 'TaalIssue' - grammar error
- 'TaalImprovement' - suggested improvement
- 'TaalInlay' - inlay hint with suggested improvement

LOG

A log file is written to the |standard-path| log directory.

vim:tw=78:ts=8:noet:ft=help:norl:
